<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Intro Encounter: Maya</title>
  <link rel="stylesheet" href="css/style.css">
  <script src="js/loader.js"></script>
  <script src="js/state.js"></script>
  <style>
    body {
      background: #0a0a0a;
      color: #f0f0f0;
      font-family: monospace;
      padding: 20px;
    }
    .dialogue-box {
      background: #1c1c1c;
      padding: 20px;
      border-radius: 10px;
      max-width: 600px;
      margin: auto;
    }
    .choice {
      display: block;
      margin: 10px 0;
      padding: 10px;
      background: #222;
      border: 1px solid #444;
      border-radius: 6px;
      cursor: pointer;
    }
    .choice:hover {
      background: #333;
      border-color: #f9d923;
    }
    .response, .reward, .start-btn {
      margin-top: 20px;
      display: none;
    }
    .start-btn button {
      background: #f9d923;
      color: #000;
      padding: 10px 16px;
      font-weight: bold;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="dialogue-box" id="dialogue">
    <p><strong>[MAYA]</strong><br>
    *Knocks on your window.*<br>
    "Still breathing in there? Good. I wasn't sure if you were dead or just broke."
    <br><br>
    "You don‚Äôt remember me, huh? Figures. Too much smoke, too little sleep."
    <br><br>
    "Name‚Äôs Maya. You were smart once. Now you‚Äôre parked on a turf line with no stash, no crew, and a phone that looks stomped."
    <br><br>
    "I tossed you something green. Sell it, smoke it, or give it back. Your move."
    </p>

    <div class="choice" onclick="choose('sell')">üíµ Sell it</div>
    <div class="choice" onclick="choose('give')">ü§ù Give it to Maya</div>
    <div class="choice" onclick="choose('smoke')">üö¨ Smoke it</div>
    <div class="choice" onclick="choose('nothing')">... Say nothing</div>
  </div>

  <div class="response" id="response"></div>
  <div class="reward" id="reward"></div>
  <div class="start-btn" id="startBtn">
    <button onclick="goToGame()">üì± Enter Game</button>
  </div>

  <script>
    async function choose(action) {
      await loadGameData();
      initPlayerState();

      const res = document.getElementById('response');
      const reward = document.getElementById('reward');
      const startBtn = document.getElementById('startBtn');

      let msg = '', gain = '';
      if (action === 'sell') {
        updateStat('cash', 20);
        msg = 'You flip the bag for $20. Maya fades into the alley.';
        gain = '+üíµ $20 | Burner OS Locked';
      } else if (action === 'give') {
        updateStat('rep', 10);
        setFlag('met_maya');
        setFlag('burner_os_unlocked');
        msg = 'Maya smirks. "You might make it after all."';
        gain = '+ü§ù REP 10 | üîì Burner OS Unlocked';
      } else if (action === 'smoke') {
        updateStat('heat', 1);
        updateStat('energy', -1);
        msg = 'You light up. Maya just walks away.';
        gain = '+üåÄ Heat 1 | -1 Energy';
      } else {
        msg = 'You say nothing. Maya walks off in silence.';
        gain = 'No change';
      }

      setFlag('intro_complete');
      res.innerText = msg;
      reward.innerText = gain;

      res.style.display = 'block';
      reward.style.display = 'block';
      startBtn.style.display = 'block';

      document.querySelectorAll('.choice').forEach(btn => btn.style.display = 'none');
    }

    function goToGame() {
      window.location.href = 'index.html';
    }
  </script>
</body>
</html>
